import{l as d,o as c,n as f,a as l,G as B,w as m,x as y,av as V,aa as C,g as k,A as J,D as E,Z as R,R as O,s as T,Q as j,E as N,aw as L,q as n,c as x,a0 as b}from"./JA_6wDNe.js";import{b as w,_ as q,u as v}from"./DwsKZaH3.js";const P={class:"content"},S={class:"operation-row"},$=d({__name:"ExceptionError",props:{title:{},status:{}},setup(p){const t=()=>{w.go(0)},o=()=>{w.back()};return(a,s)=>{const r=V,i=C;return c(),f("div",P,[l(r,{class:"result",status:a.status,subtitle:a.title},null,8,["status","subtitle"]),B("div",S,[l(i,{key:"again",onClick:t,style:{"margin-right":"16px"}},{default:m(()=>s[0]||(s[0]=[y(" 重试 ")])),_:1}),l(i,{key:"back",type:"primary",onClick:o},{default:m(()=>s[1]||(s[1]=[y(" 返回 ")])),_:1})])])}}}),G=q($,[["__scopeId","data-v-3d99c615"]]),I=d({__name:"AmisRenderer",props:{amisJson:{}},setup(p){const t=window.amisRequire("amis/embed"),o=k(null),a=p,s=J(),r=E(),i=k(null),_=()=>{i.value=t.embed(o.value,a.amisJson,{},{jumpTo:e=>{if(e=="back()"){s.back();return}if(e.indexOf("http://")==0||e.indexOf("https://")==0){window.location.href=e;return}s.push(e)},updateLocation:(e,g)=>{let u=e.split("&").filter(A=>A.indexOf("search[")===-1).join("&");u.indexOf("?")!==0&&(u="?"+u);const h=r.path+u;g?s.replace(h):s.push(h)},affixOffsetTop:48})};return R(()=>_()),O(()=>{var e;(e=i.value)==null||e.unmount()}),(e,g)=>(c(),f("div",{class:"amis-main",ref_key:"amisEL",ref:o},null,512))}}),M={class:"main-container"},D=d({__name:"AmisView",setup(p){const{thisPage:t}=T(v()),{getPageJson:o}=v(),a=E();j(()=>a.path,async r=>{await o(r,a.query)}),R(async()=>{await o(a.path,a.query)});const s=N(()=>t.value.status.toString());return(r,i)=>{const _=I,e=G;return c(),f("div",M,[l(L,{name:"fade"},{default:m(()=>[!n(t).error&&n(t).pageJson&&!n(t).loading?(c(),x(_,{key:n(a).path,"amis-json":n(t).pageJson},null,8,["amis-json"])):b("",!0),n(t).error&&!n(t).loading?(c(),x(e,{key:1,title:n(t).errorMessage,status:n(s)},null,8,["title","status"])):b("",!0)]),_:1})])}}}),z=q(D,[["__scopeId","data-v-cbb3f29c"]]);export{z as default};
