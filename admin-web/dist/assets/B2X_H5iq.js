import{k as D,s as le,o as i,c as b,w as n,a as o,l as T,F as N,n as P,p as c,q as X,t as z,I as re,B as ue,v as ie,x as de,y as O,z as v,A as m,T as _e,D as pe,E as Y,G as me,H as fe,J as he,K as ve,L as Z,M as W,O as j,f as E,P as ee,Q as ge,R as be,r as te,S as H,U as ye,V as ke,W as Ie,X as we,Y as q,Z as Se,_ as J,$ as R,a0 as Ce,a1 as Me,a2 as xe,a3 as Te,a4 as $e,a5 as Le,a6 as ne,a7 as Be,a8 as De,a9 as Re,aa as Ee,ab as Fe,ac as Ae,ad as Ue,ae as ze,af as Ke,ag as Ne,ah as Pe,ai as qe,aj as Ve,ak as He,al as Oe,am as We,an as je,ao as Q,ap as Ge,aq as Je,ar as Qe,as as Xe,at as Ye}from"./7ce62ioI.js";import{u as Ze,_ as F,a as oe,b as B,l as et,r as tt,c as nt,s as ot,d as st}from"./BpTLdzrt.js";const at=D({__name:"PageBreadcrumb",setup(a){const{pageBreadcrumb:t}=le(Ze());return(d,e)=>{const l=re,h=ue,p=ie;return i(),b(p,{class:"container-breadcrumb"},{default:n(()=>[o(h,null,{default:n(()=>[o(l)]),_:1}),(i(!0),T(N,null,P(c(t),f=>(i(),b(h,{key:f},{default:n(()=>[X(z(f),1)]),_:2},1024))),128))]),_:1})}}}),ct=F(at,[["__scopeId","data-v-8a044137"]]),K=a=>(W("data-v-82964898"),a=a(),j(),a),lt={class:"tag-link"},rt=K(()=>m("span",null,"重新加载",-1)),ut=K(()=>m("span",null,"关闭当前标签页",-1)),it=K(()=>m("span",null,"关闭左侧标签页",-1)),dt=K(()=>m("span",null,"关闭右侧标签页",-1)),_t=K(()=>m("span",null,"关闭其它标签页",-1)),pt=D({__name:"TabItem",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(a){const t=a,d=de(),e=O(),l=oe(),h=s=>{d.push({path:s.path,query:s.params})},p=v(()=>l.getTabList),f=v(()=>t.itemData.path!==e.path),u=v(()=>t.index===0),I=v(()=>[0,1].includes(t.index)),k=v(()=>t.index===p.value.length-1),S=(s,_)=>{if(l.deleteTag(_,s),t.itemData.path===e.path){const g=p.value[_-1];d.push({path:g.path,query:g.params})}},C=()=>p.value.findIndex(s=>s.path===e.path),M=async s=>{const{itemData:_,index:g}=t,y=[...p.value];if(s==="current")S(_,g);else if(s==="left"){const r=C();y.splice(1,t.index-1),l.freshTabList(y),r<g&&d.push({name:_.name})}else if(s==="right"){const r=C();y.splice(t.index+1),l.freshTabList(y),r>g&&d.push({name:_.name})}else if(s==="others"){const r=p.value.filter((x,w)=>w===0||w===t.index);l.freshTabList(r),d.push({name:_.name})}else s==="reload"&&location.reload()};return(s,_)=>{const g=_e,y=pe,r=Y,x=me,w=fe,$=he,A=ve,U=Z;return i(),b(U,{trigger:"contextMenu","popup-max-height":!1,onSelect:M},{content:n(()=>[o(r,{disabled:c(f),value:"reload"},{default:n(()=>[o(y),rt]),_:1},8,["disabled","value"]),o(r,{class:"sperate-line",disabled:c(u),value:"current"},{default:n(()=>[o(x),ut]),_:1},8,["disabled","value"]),o(r,{disabled:c(I),value:"left"},{default:n(()=>[o(w),it]),_:1},8,["disabled","value"]),o(r,{class:"sperate-line",disabled:c(k),value:"right"},{default:n(()=>[o($),dt]),_:1},8,["disabled","value"]),o(r,{value:"others"},{default:n(()=>[o(A),_t]),_:1},8,["value"])]),default:n(()=>[o(g,{closable:"",checkable:"",checked:a.itemData.path===s.$route.path,onCheck:_[0]||(_[0]=L=>h(a.itemData)),onClose:_[1]||(_[1]=L=>S(a.itemData,a.index))},{default:n(()=>[m("span",lt,z(a.itemData.name),1)]),_:1},8,["checked"])]),_:1})}}}),mt=F(pt,[["__scopeId","data-v-82964898"]]),ft=a=>(W("data-v-ff93c19a"),a=a(),j(),a),ht={class:"tab-bar-container"},vt={class:"tab-bar-box"},gt={class:"tab-bar-scroll"},bt={class:"tags-wrap"},yt=ft(()=>m("div",{class:"tag-bar-operation"},null,-1)),kt=D({__name:"TabBar",setup(a){const t=B(),d=oe(),e=E(),l=v(()=>d.getTabList),h=v(()=>t.navbar?60:0);return ee(()=>t.navbar,()=>{e.value.updatePosition()}),et(p=>{l.value.some(f=>f.path===p.path)||d.updateTabList(p)},!0),ge(()=>{tt()}),(p,f)=>{const u=mt,I=be;return i(),T("div",ht,[o(I,{ref_key:"affixRef",ref:e,"offset-top":c(h)},{default:n(()=>[m("div",vt,[m("div",gt,[m("div",bt,[(i(!0),T(N,null,P(c(l),(k,S)=>(i(),b(u,{key:k.id,index:S,"item-data":k},null,8,["index","item-data"]))),128))])]),yt])]),_:1},8,["offset-top"])])}}}),It=F(kt,[["__scopeId","data-v-ff93c19a"]]),wt=D({__name:"MenuItem",props:{item:{},showIcon:{type:Boolean}},setup(a){const t=O(),d=e=>{if(e.is_ext){const l=document.createElement("a");e.ext_open_mode==2&&(l.target="_blank"),l.href=e.path,l.click();return}t.path!==e.path&&nt.push({path:e.path,query:e.params})};return(e,l)=>{const h=te("MenuItem",!0),p=ke,f=Ie;return e.item.children&&e.item.children.length>0?(i(),b(p,{key:e.item.id},{icon:n(()=>[m("i",{class:H(["text-15",e.item.icon])},null,2)]),title:n(()=>[m("span",null,z(e.item.name),1)]),default:n(()=>[(i(!0),T(N,null,P(e.item.children,u=>(i(),b(h,{key:u.key,item:u,"show-icon":!1},null,8,["item"]))),128))]),_:1})):(i(),b(f,{key:e.item.id,onClick:l[0]||(l[0]=u=>d(e.item))},ye({default:n(()=>[m("span",null,z(e.item.name),1)]),_:2},[e.item.icon&&e.showIcon?{name:"icon",fn:n(()=>[m("i",{class:H(["text-15",e.item.icon])},null,2)]),key:"0"}:void 0]),1024))}}}),St=()=>{const a=B(),t=v(()=>a.menuFromServer?a.appAsyncMenus:[]);return{menuTree:v(()=>{const e=we.cloneDeep(t.value);function l(h,p){return h?h.map(u=>{if(!u.children)return u.children=[],u;u.children=u.children.filter(k=>k.show==!0);const I=l(u.children,p+1);return I.length||p>1?(u.children=I,u):u.show?u:null}).filter(Boolean):null}return l(e,0)})}},Ct=D({__name:"PageMenu",setup(a){const t=B(),{menuTree:d}=St(),e=v({get(){return t.device==="desktop"?t.menuCollapse:!1},set(s){t.updateSettings({menuCollapse:s})}}),l=O(),h=E(!1);q(async()=>{await t.fetchServerMenuConfig(),h.value=!0,S(M.value);const s=B().getMenuItemByUri(l.path);s&&ot(s)});const p=v(()=>t.topMenu),f=Se("admin-open-keys",[]),u=E([]),I=s=>{const _=[];let g=!1;const y=(r,x)=>{var w;if(r.id===s){g=!0,_.push(...x);return}(w=r.children)!=null&&w.length&&r.children.forEach($=>{y($,[...x,$.id])})};return d.value.forEach(r=>{g||y(r,[r.id])}),_},k=s=>{t.device==="desktop"&&t.updateSettings({menuCollapse:s})};ee(()=>l.path,()=>{S(M.value)});const S=s=>{s&&(!s.show&&s.active_menu?u.value=[s.active_menu]:u.value=[s.id],C(I(s.id)))},C=s=>{s.forEach(_=>{f.value.includes(_)||f.value.push(_)})},M=v(()=>B().getMenuItemByUri(l.path));return(s,_)=>{const g=wt,y=Ce;return c(h)?(i(),b(y,{key:0,mode:c(p)?"horizontal":"vertical",collapsed:c(e),"onUpdate:collapsed":_[0]||(_[0]=r=>J(e)?e.value=r:null),"open-keys":c(f),"onUpdate:openKeys":_[1]||(_[1]=r=>J(f)?f.value=r:null),"show-collapse-button":c(t).device!=="mobile","auto-open":!1,"selected-keys":c(u),"auto-open-selected":!0,"level-indent":34,style:{height:"100%",width:"100%"},onCollapse:k,class:"select-none"},{default:n(()=>[(i(!0),T(N,null,P(c(d),r=>(i(),b(g,{key:r.key,item:r,"show-icon":!0},null,8,["item"]))),128))]),_:1},8,["mode","collapsed","open-keys","show-collapse-button","selected-keys"])):R("",!0)}}}),Mt=F(Ct,[["__scopeId","data-v-c46ecbf9"]]),se=a=>(W("data-v-effd5f04"),a=a(),j(),a),xt={class:"navbar"},Tt={class:"left-side"},$t={class:"right-side"},Lt=["src"],Bt=se(()=>m("span",null," 用户设置 ",-1)),Dt=se(()=>m("span",null," 退出登录 ",-1)),Rt=D({__name:"NavBar",setup(a){const t=B(),d=st(),{isFullscreen:e,toggle:l}=Me(),h=v(()=>d.avatar),p=v(()=>t.theme);q(()=>{});const f=v(()=>t.topMenu&&t.menu),u=xe({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:"arco-theme",onChanged(M){t.toggleTheme(M)}}),I=Te(u),k=()=>{I(),location.reload()},S=()=>{d.logout()},C=$e("toggleDrawerMenu");return(M,s)=>{const _=Le,g=ne,y=Be,r=De,x=Re,w=Ee,$=Fe,A=Ae,U=Ue,L=ze,V=Ke,G=Y,ae=Ne,ce=Z;return i(),T("div",xt,[m("div",Tt,[o(g,null,{default:n(()=>[!c(f)&&c(t).device==="mobile"?(i(),b(_,{key:0,style:{"font-size":"22px",cursor:"pointer"},onClick:c(C)},null,8,["onClick"])):R("",!0)]),_:1})]),m("ul",$t,[m("li",null,[o(w,{content:c(p)==="light"?"点击切换为暗黑模式":"点击切换为亮色模式"},{default:n(()=>[o(x,{class:"nav-btn",type:"outline",shape:"circle",onClick:k},{icon:n(()=>[c(p)==="dark"?(i(),b(y,{key:0})):(i(),b(r,{key:1}))]),_:1})]),_:1},8,["content"])]),m("li",null,[o(w,{content:c(e)?"点击退出全屏模式":"点击切换全屏模式"},{default:n(()=>[o(x,{class:"nav-btn",type:"outline",shape:"circle",onClick:c(l)},{icon:n(()=>[c(e)?(i(),b($,{key:0})):(i(),b(A,{key:1}))]),_:1},8,["onClick"])]),_:1},8,["content"])]),m("li",null,[o(ce,{trigger:"click"},{content:n(()=>[o(G,null,{default:n(()=>[o(g,{onClick:s[0]||(s[0]=Wt=>M.$router.push("/userSetting"))},{default:n(()=>[o(V),Bt]),_:1})]),_:1}),o(G,null,{default:n(()=>[o(g,{onClick:S},{default:n(()=>[o(ae),Dt]),_:1})]),_:1})]),default:n(()=>[o(L,{size:32,style:{marginRight:"8px",cursor:"pointer"}},{default:n(()=>[c(h)?(i(),T("img",{key:0,alt:"avatar",src:c(h)},null,8,Lt)):(i(),b(U,{key:1}))]),_:1})]),_:1})])])])}}}),Et=F(Rt,[["__scopeId","data-v-effd5f04"]]);function Ft(a,t,d,e=!1){a.addEventListener&&typeof a.addEventListener=="function"&&a.addEventListener(t,d,e)}function At(a,t,d,e=!1){a.removeEventListener&&typeof a.removeEventListener=="function"&&a.removeEventListener(t,d,e)}const Ut=992;function zt(){return document.body.getBoundingClientRect().width-1<Ut}const Kt=a=>{const t=B();function d(){if(!document.hidden){const l=zt();t.toggleDevice(l?"mobile":"desktop"),t.toggleMenu(l)}}const e=Ve(d,100);q(()=>{e()}),Pe(()=>{Ft(window,"resize",e)}),qe(()=>{At(window,"resize",e)})},Nt={key:0,class:"layout-navbar"},Pt={class:"menu-wrapper"},qt={class:"left-side"},Vt=["src"],Ht="60px",Ot=D({__name:"BaseLayout",setup(a){const t=E(window.AmisAdmin),d=E(!1),e=B();Kt();const l=v(()=>e.navbar),h=v(()=>e.menu&&!e.topMenu),p=v(()=>e.hideMenu),f=v(()=>e.menuCollapse?48:e.menuWidth),u=v(()=>{const C=h.value&&!p.value?{paddingLeft:`${f.value}px`}:{},M=l.value?{paddingTop:Ht}:{};return{...C,...M}}),I=C=>{d.value&&e.updateSettings({menuCollapse:C})},k=E(!1),S=()=>{k.value=!1};return He("toggleDrawerMenu",()=>{k.value=!k.value}),q(()=>{d.value=!0}),(C,M)=>{const s=Et,_=Je,g=ne,y=Mt,r=Qe,x=Xe,w=It,$=ct,A=te("router-view"),U=Ye,L=Oe;return i(),b(L,{class:H(["layout",{mobile:c(e).hideMenu}])},{default:n(()=>[c(l)?(i(),T("div",Nt,[o(s)])):R("",!0),o(L,null,{default:n(()=>[o(L,null,{default:n(()=>[c(h)?We((i(),b(r,{key:0,class:"layout-sider",breakpoint:"xl",collapsible:!0,width:c(f),style:Q({paddingTop:c(l)?"60px":""}),"hide-trigger":!0,onCollapse:I},{default:n(()=>[m("div",Pt,[m("div",qt,[o(g,null,{default:n(()=>[c(t).logo?(i(),T("img",{key:0,alt:"logo",src:c(t).logo},null,8,Vt)):R("",!0),o(_,null,{default:n(()=>[X(z(c(t).title),1)]),_:1})]),_:1})]),o(y)])]),_:1},8,["width","style"])),[[je,!c(p)]]):R("",!0),c(p)?(i(),b(x,{key:1,visible:c(k),placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:S},{default:n(()=>[o(y)]),_:1},8,["visible"])):R("",!0),o(L,{class:"layout-content",style:Q(c(u))},{default:n(()=>[o(w),o(U,null,{default:n(()=>[o($,{class:"px-10"}),o(A,null,{default:n(({Component:V})=>[(i(),b(Ge(V)))]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}}),Jt=F(Ot,[["__scopeId","data-v-4b3ae35b"]]);export{Jt as default};
