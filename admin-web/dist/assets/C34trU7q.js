const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Bo_hSm-K.js","assets/JA_6wDNe.js","assets/DMDu9aLK.css","assets/Bj4tzhZR.js","assets/BQMouBeq.css","assets/DfvfSpFq.js","assets/bNvjtnEv.css","assets/BANIMOgR.js","assets/BgK6drxw.css"])))=>i.map(i=>d[i]);
import{r as U,o as B,c as I,w as N,a as F,C as H,b as G,d as q,v as D,u as V,e as k,t as L,N as W,m as $,f as w,g as v,s as x,h as j,i as J,j as K,k as Y}from"./JA_6wDNe.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const z=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},Q={};function X(e,t){const n=U("router-view"),r=H;return B(),I(r,null,{default:N(()=>[F(n)]),_:1})}const Z=z(Q,[["render",X]]),ee="modulepreload",te=function(e){return"/admin/"+e},A={},_=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=te(l),l in A)return;A[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const c=document.createElement("link");if(c.rel=d?"stylesheet":ee,d||(c.as="script"),c.crossOrigin="",c.href=l,i&&c.setAttribute("nonce",i),document.head.appendChild(c),d)return new Promise((h,p)=>{c.addEventListener("load",h),c.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return o.then(s=>{for(const i of s||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})},E="admin-token",R=()=>!!localStorage.getItem(E),ke=e=>{localStorage.setItem(E,e)},Le=()=>{localStorage.removeItem(E)},oe="light",ne=!1,re=!0,se=!0,ae=!1,ie=!1,ce=!1,ue=!1,le="#165DFF",de=220,fe=!1,me="desktop",he=!0,pe=!0,ge=[],ve={},_e={theme:oe,colorWeak:ne,navbar:re,menu:se,topMenu:ae,hideMenu:ie,menuCollapse:ce,footer:ue,themeColor:le,menuWidth:de,globalSettings:fe,device:me,tabBar:he,menuFromServer:pe,serverMenu:ge,activeMenus:ve},g=G({baseURL:window.AmisAdmin.apiBase,timeout:1e3*30,requestAdapter:q(),cacheFor:{},statesHook:D,beforeRequest:()=>{},responded:{onSuccess:async e=>{const t=await e.data;if(t.status!==0){if(t.status==401){location.reload();return}throw new Error(t.msg)}return t.data},onError:e=>{throw e.response.status===401&&location.reload(),new Error(e.response.data.msg??e.response.data.message)}}});function Re(e){return g.Post("/auth/login",e)}function Ce(){return g.Get("/auth/logout")}function we(){return g.Get("/userMenus")}async function ye(e,t){return g.Get(e,{params:t})}const{set:P}=V(),C=k("app",{state:()=>({..._e,config:window.AmisAdmin}),getters:{appCurrentSetting(e){return{...e}},appDevice(e){return e.device},appAsyncMenus(e){return e.serverMenu},appActiveMenus(e){return e.activeMenus}},actions:{updateSettings(e){this.$patch(e)},toggleTheme(e){e?(this.theme="dark",document.body.setAttribute("arco-theme","dark"),P("arco-theme","dark",{path:"/"})):(this.theme="light",document.body.removeAttribute("arco-theme"),P("arco-theme","light",{path:"/"}))},toggleDevice(e){this.device=e},toggleMenu(e){this.hideMenu=e},async fetchServerMenuConfig(){const[e,t]=await L(we());if(e){W.error({title:"错误",content:e.message});return}this.serverMenu=t.menus,this.activeMenus=t.active_menus},clearServerMenu(){this.serverMenu=[]},getMenuItemByUri(e){e=e.split("?")[0];const t=[];let n=!1;const r=o=>{var a;if(o.path==e){n=!0,t.push(o);return}(a=o.children)!=null&&a.length&&o.children.forEach(s=>{r(s)})};return this.serverMenu.forEach(o=>{n||r(o)}),t[0]}}}),M=$(),b=Symbol("ROUTE_CHANGE");let y;function Ee(e){M.emit(b,e),y=e}function Me(e,t=!0){M.on(b,e),t&&y&&e(y)}function Oe(){M.off(b)}w.configure({showSpinner:!1});const Te=k("pages",()=>{const e={},t=v({loading:!0,error:!1,status:0,errorMessage:"",pageJson:null,showMenu:!0,showHeader:!0}),n=async(i,l)=>{w.start(),t.value.loading=!0;const[d,u]=await L(ye(i,l));if(t.value.loading=!1,w.done(),d){t.value.error=!0,t.value.status=404,t.value.errorMessage=d.message;return}u.action?(u.action=="jump"&&u.url&&(window.location.href=u.url),u.action=="renderPage"&&(t.value.showHeader=u.showHeader??!0,t.value.showMenu=u.showMenu??!0)):(t.value.showHeader=!0,t.value.showMenu=!0),e[i]=u,t.value.status=u.status??0,t.value.pageJson=e[i],t.value.error=!1},{appAsyncMenus:r}=x(C()),o=i=>{const l=[];let d=!1;const u=(c,h)=>{var p;if(c.id===i){d=!0,l.push(...h,c.name);return}(p=c.children)!=null&&p.length&&c.children.forEach(T=>{u(T,[...h,c.name])})};return r.value.forEach(c=>{d||u(c,[])}),l},a=v(),s=v([]);return Me(i=>{a.value=i,s.value=o(i.id)},!0),{thisPage:t,pageBreadcrumb:s,getPageJson:n}}),be=j(),Se=window.AmisAdmin.prefix,f={home:"home",login:"login"},m=J({history:K(`${Se}/view/`),routes:[{path:"/",name:f.home,component:()=>_(()=>import("./Bo_hSm-K.js"),__vite__mapDeps([0,1,2,3,4])),redirect:"home",children:[{path:"/:pathMatch(.*)*",name:"amis-view",component:()=>_(()=>import("./DfvfSpFq.js"),__vite__mapDeps([5,1,2,6]))}]},{path:"/login",name:f.login,component:()=>_(()=>import("./BANIMOgR.js"),__vite__mapDeps([7,1,2,3,8]))}]}),O=[f.login];m.beforeEach((e,t,n)=>{const r=R(),o=O.includes(e.name);!r&&!o?n({name:f.login}):r&&e.name===f.login?n({name:f.home}):n()});m.afterEach(e=>{const t=R(),n=O.includes(e.name);!t&&!n&&Ae({name:f.login},!0);const r=C().getMenuItemByUri(e.path);r&&Ee(r)});function Ae(e,t=!1){(t?m.replace:m.push)(e).then(()=>{}).catch(r=>{console.log(r)})}const S=Y(Z);S.use(m);S.use(be);S.mount("#app");export{f as P,z as _,C as a,m as b,Re as c,ke as d,Le as e,Ce as f,Me as l,Oe as r,Ee as s,Ae as t,Te as u};
