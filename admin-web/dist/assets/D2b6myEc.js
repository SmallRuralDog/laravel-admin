import{k as V,f as p,o as i,l as w,A as t,a as e,w as a,F as E,n as T,p as o,aw as z,c as y,t as g,ax as G,Z as M,ay as R,$ as Z,q as P,az as j,ad as H,aA as J,aB as K,aC as O,aD as Q,aE as W,aa as X,a6 as Y,aF as ee,a9 as oe,aG as se}from"./CG0sQdSw.js";import{_ as k,c as ae,t as te,P as ne}from"./DcTOGpb2.js";const re={class:"banner"},le={class:"banner-inner"},ce={class:"carousel-title"},ie={class:"carousel-sub-title px-20 line-clamp-2"},de=["src"],_e=V({__name:"LoginBanner",setup(b){const s=p(window.AmisAdmin.loginBanner);return(d,f)=>{const _=G,$=z;return i(),w("div",re,[t("div",le,[e($,{class:"carousel","animation-name":"fade"},{default:a(()=>[(i(!0),w(E,null,T(o(s),r=>(i(),y(_,{key:r.title},{default:a(()=>[(i(),w("div",{key:r.title,class:"carousel-item"},[t("div",ce,g(r.title),1),t("div",ie,g(r.desc),1),t("img",{class:"carousel-image",src:r.image},null,8,de)]))]),_:2},1024))),128))]),_:1})])])}}}),me=k(_e,[["__scopeId","data-v-0566b7fc"]]),ue=(b=!1)=>{const s=p(b);return{loading:s,setLoading:_=>{s.value=_},toggle:()=>{s.value=!s.value}}},pe={class:"login-form-wrapper"},ge={class:"login-form-title"},fe={class:"login-form-sub-title"},ve={class:"login-form-error-msg"},he=["src"],we={class:"login-form-password-actions"},be=V({__name:"LoginForm",setup(b){const s=p(window.AmisAdmin),d=p(""),{loading:f,setLoading:_}=ue(),$=ae(),r=p(s.value.captchaUrl),I=()=>{r.value=`${s.value.captchaUrl}?${Date.now()}`},l=M("login-config",{rememberPassword:!0,username:"",password:""}),c=R({username:l.value.username,password:l.value.password,rememberPassword:l.value.rememberPassword,verification_code:""}),L=async({errors:v,values:n})=>{if(d.value="",!f.value&&!v){_(!0);try{await $.login(n),j.success("登录成功"),te({name:ne.home});const{rememberPassword:m}=l.value,{username:x,password:u}=n;l.value.username=m?x:"",l.value.password=m?u:""}catch(m){d.value=m.message}finally{_(!1)}}},A=v=>{l.value.rememberPassword=v,c.rememberPassword=v};return(v,n)=>{const m=H,x=J,u=K,B=O,S=Q,F=W,U=X,C=Y,q=ee,D=oe,N=se;return i(),w("div",pe,[t("div",ge,g(o(s).loginTitle),1),t("div",fe,g(o(s).loginDesc),1),t("div",ve,g(o(d)),1),e(N,{ref:"loginForm",model:o(c),class:"login-form",layout:"vertical",onSubmit:L},{default:a(()=>[e(u,{field:"username",rules:[{required:!0,message:"用户名不能为空"}],"validate-trigger":["change","blur"],"hide-label":""},{default:a(()=>[e(x,{modelValue:o(c).username,"onUpdate:modelValue":n[0]||(n[0]=h=>o(c).username=h),placeholder:"用户名"},{prefix:a(()=>[e(m)]),_:1},8,["modelValue"])]),_:1}),e(u,{field:"password",rules:[{required:!0,message:"密码不能为空"}],"validate-trigger":["change","blur"],"hide-label":""},{default:a(()=>[e(S,{modelValue:o(c).password,"onUpdate:modelValue":n[1]||(n[1]=h=>o(c).password=h),placeholder:"密码","allow-clear":""},{prefix:a(()=>[e(B)]),_:1},8,["modelValue"])]),_:1}),o(s).opebCaptcha?(i(),y(u,{key:0,field:"verification_code",rules:[{required:!0,message:" 验证码不能为空"}],"validate-trigger":["change","blur"],"hide-label":""},{default:a(()=>[e(C,null,{default:a(()=>[e(x,{modelValue:o(c).verification_code,"onUpdate:modelValue":n[2]||(n[2]=h=>o(c).verification_code=h),placeholder:"验证码"},{prefix:a(()=>[e(F)]),_:1},8,["modelValue"]),e(U,{content:"点击刷新验证码"},{default:a(()=>[t("img",{src:o(r),onClick:I,alt:"",srcset:"",class:"w-full h-32px rounded-2px cursor-pointer"},null,8,he)]),_:1})]),_:1})]),_:1})):Z("",!0),e(u,{field:"rememberPassword"},{default:a(()=>[e(C,{size:16,direction:"vertical"},{default:a(()=>[t("div",we,[e(q,{checked:"rememberPassword","model-value":o(l).rememberPassword,onChange:A},{default:a(()=>[P("记住密码")]),_:1},8,["model-value","onChange"])]),e(D,{type:"primary","html-type":"submit",long:"",loading:o(f)},{default:a(()=>[P(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model"])])}}}),xe=k(be,[["__scopeId","data-v-99b82696"]]),$e={class:"container"},Ve={class:"logo"},ke=["src"],Ce={class:"logo-text"},Pe={class:"content"},ye={class:"content-inner"},Ie=V({__name:"LoginView",setup(b){const s=p(window.AmisAdmin);return localStorage.setItem("arco-theme","light"),(d,f)=>(i(),w("div",$e,[t("div",Ve,[t("img",{alt:"logo",class:"h-33 w-33",src:o(s).logo},null,8,ke),t("div",Ce,g(o(s).title),1)]),e(me),t("div",Pe,[t("div",ye,[e(xe)])])]))}}),Be=k(Ie,[["__scopeId","data-v-f1e1325c"]]);export{Be as default};
